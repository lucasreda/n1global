Implementar um sistema completo de edição de páginas de funil dentro da tela existente /funnels/:id (FunnelEditor). O sistema deve permitir gerenciar, criar e editar páginas de funil de forma visual e intuitiva.

CONTEXTO TÉCNICO
Arquitetura Existente: Rota /funnels/:id → FunnelEditor component com sistema de tabs
Backend: APIs em server/funnel-routes.ts já existem para CRUD de páginas
Database: Tabelas funnel_pages, funnel_page_revisions, funnel_page_templates já criadas
Frontend: React + TypeScript + TanStack Query + shadcn/ui + Tailwind
IMPLEMENTAÇÃO COMPLETA EM 4 FASES
FASE 1: Tab "Páginas" - Gerenciamento e Listagem
Objetivo: Implementar a tab "content" (Páginas) no FunnelEditor existente

Requisitos:

TabsContent para "content" dentro do FunnelEditor.tsx
Lista de páginas do funil com cards visuais
Ações por página: Editar, Preview, Duplicar, Deletar, Reordenar
Botão "Criar Nova Página" com seleção de template
Status visual de cada página (rascunho, publicada, erro)
Integração com React Query para buscar páginas via /api/funnels/:id/pages
Componentes a criar:

FunnelPagesManager - Gerenciador principal das páginas
PageCard - Card individual de cada página
CreatePageModal - Modal para criar nova página
PageActionsMenu - Menu de ações (Editar, Preview, etc.)
FASE 2: APIs e Backend Integration
Objetivo: Garantir todas as APIs necessárias estão funcionando

APIs necessárias (verificar e implementar se missing):

GET /api/funnels/:id/pages - Listar páginas do funil
POST /api/funnels/:id/pages - Criar nova página
GET /api/funnels/:id/pages/:pageId - Buscar página específica
PUT /api/funnels/:id/pages/:pageId - Atualizar página
DELETE /api/funnels/:id/pages/:pageId - Deletar página
POST /api/funnels/:id/pages/:pageId/duplicate - Duplicar página
PUT /api/funnels/:id/pages/reorder - Reordenar páginas
GET /api/funnels/templates - Listar templates disponíveis
Query Keys Structure:

['/api/funnels', funnelId, 'pages'] - Lista de páginas
['/api/funnels', funnelId, 'pages', pageId] - Página específica
['/api/funnels/templates'] - Templates disponíveis
FASE 3: Editor Visual Dedicado
Objetivo: Sistema de edição rica para páginas individuais

Arquitetura do Editor:

Nova rota: /funnels/:id/pages/:pageId/edit → PageEditor component
Editor full-screen com toolbar completa
Componentes editáveis: Textos, imagens, botões, seções
Sistema drag & drop para reordenar elementos
Preview em tempo real (split-screen ou toggle)
Responsividade: Preview mobile/tablet/desktop
Funcionalidades do Editor:

Rich Text Editor usando Quill.js (já disponível no projeto)
Upload de imagens integrado com object storage
Biblioteca de componentes (Call-to-Action, Testimoniais, FAQ, etc.)
Configurações visuais: Cores, fontes, espaçamentos, backgrounds
CSS customizável para usuários avançados
Componentes a criar:

PageEditor - Editor principal full-screen
EditorToolbar - Barra de ferramentas
ComponentLibrary - Biblioteca de componentes
PropertyPanel - Painel de propriedades do elemento selecionado
ResponsivePreview - Preview responsivo
FASE 4: Funcionalidades Avançadas
Objetivo: Sistema profissional e produtivo

Auto-Save e Versioning:

Auto-save a cada 30 segundos
Histórico de versões usando funnel_page_revisions
Undo/Redo com stack de comandos
Restaurar versão anterior com confirmação
Colaboração e Workflow:

Comments system para feedback em elementos específicos
Status workflow: Rascunho → Revisão → Aprovado → Publicado
Lock de edição quando outro usuário está editando
Performance e UX:

Lazy loading de componentes pesados
Skeleton loading durante carregamento
Toast notifications para ações importantes
Keyboard shortcuts para ações comuns
Zoom e pan no canvas de edição
Analytics Integration:

Preview com analytics usando o sistema de analytics existente
A/B testing entre versões de páginas
Heatmaps de interação (futuro)
INTEGRAÇÕES EXISTENTES A MANTER
Sistema de autenticação com verificação de operação
Vercel deployment via vercelService
Object storage para upload de assets
Analytics tracking para páginas publicadas
Sistema de templates já implementado
ESTRUTURA DE DADOS
Usar as tabelas existentes:

funnel_pages - Dados da página
funnel_page_revisions - Histórico de versões
funnel_page_templates - Templates base
Campos importantes no JSON content:

{
  version: "1.0",
  sections: [
    {
      id: string,
      type: "hero" | "features" | "testimonials" | "cta" | "custom",
      content: object,
      style: object,
      order: number
    }
  ],
  globalStyles: object,
  seoConfig: object
}
REQUISITOS DE UX/UI
Design consistente com o tema dark existente
Loading states para todas as operações async
Error handling com mensagens user-friendly
Confirmações para ações destrutivas
Breadcrumbs clara para navegação
Mobile-first responsive design
Accessibility completa (ARIA labels, keyboard navigation)
VALIDAÇÕES E SEGURANÇA
Zod schemas para validação de dados
Rate limiting em endpoints de save
Sanitização de HTML/CSS input
Verificação de permissões por operação
CSRF protection em formulários
DELIVERABLES FINAIS
✅ Tab "Páginas" funcional no FunnelEditor
✅ Sistema completo de CRUD de páginas
✅ Editor visual full-screen por página
✅ Auto-save e sistema de versões
✅ Preview responsivo em tempo real
✅ Integração com deployment Vercel
✅ Upload de imagens e assets
✅ Biblioteca de componentes reutilizáveis
✅ Analytics integration para páginas
✅ Workflow de aprovação e publicação

COMEÇAR PELA FASE 1 e implementar as fases sequencialmente, testando cada uma antes de prosseguir. Manter compatibilidade com o sistema existente e seguir os padrões de código já estabelecidos no projeto.